!function(window,document){"use strict";function Promise(self,nameThen,nameCatch){this._this=self,this._nameThen=nameThen,this._nameCatch=nameCatch}function FontFace(family,fonts,settings){if(void 0===fonts)return console.log("No se determinó enlaces para las fuentes.");var config=settings||Object.create(null);this.display=config.display||"auto",this.family=family,this.featureSettings=config.featureSettings||"normal",this.stretch=config.stretch||"normal",this.style=config.style||"normal",this.loaded=new Promise(this,"thenLoaded","catchLoaded"),this.src=FFMethods.getUrl(fonts),this.status="unloaded",this.unicodeRange=config.unicodeRange||"U+0-10FFFF",this.variant=config.variant||"normal",this.weight=config.weight||"normal"}function FontFaceSet(){}var DFMethods={fontsAdded:[],createInDom:function(id,styleFont,objFont){var styleElement=document.createElement("style");styleElement.type="text/css",styleElement.id=id,styleElement.innerHTML=styleFont,document.head.appendChild(styleElement),objFont.id=id},add:function(fontObj){var valStyle,ruleToAdd,styles=[],objToSave=Object.create(null),propsToIgnore=["urlBlob","loaded","status","catch","encoded","src","then","thenLoaded","catchLoaded"];Object.keys(fontObj).forEach(function(name){if(-1===propsToIgnore.indexOf(name)){switch(valStyle=fontObj[name],name){case"unicodeRange":ruleToAdd="unicode-range: "+valStyle;break;case"featureSettings":ruleToAdd="font-feature-settings: "+valStyle;break;case"family":ruleToAdd="font-"+name+': "'+valStyle+'"';break;default:ruleToAdd="font-"+name+": "+valStyle}styles.push(ruleToAdd),objToSave[name]=valStyle}});var i,byteCharacters=atob(fontObj.encoded.replace("data:application/octet-binary;base64,","")),nByteCharacters=byteCharacters.length,byteNumbers=new Array(nByteCharacters);for(i=0;i<nByteCharacters;i++)byteNumbers[i]=byteCharacters.charCodeAt(i);var byteArray=new Uint8Array(byteNumbers),blob=new Blob([byteArray],{type:"application/octet-binary"}),urlBlob=URL.createObjectURL(blob);styles.push('src: url("'+urlBlob+'")');var styleFont="@font-face {"+styles.join(";")+"}",docStyles=document.styleSheets,idStyle="ffp"+(65536*(1+Math.random())|0).toString(16).substring(1);if(objToSave.index=null,docStyles.length){var ifont,indexStyleSheet=!1,nObjCssStyles=Object.keys(docStyles).length,attachStyle=!1;for(ifont=0;ifont<nObjCssStyles;ifont++)if("ffp"!==docStyles[ifont].ownerNode.id.substr(0,3)){attachStyle=!0,indexStyleSheet=ifont;break}if(attachStyle){var scopeStyle=docStyles[indexStyleSheet];scopeStyle.insertRule(""+styleFont,scopeStyle.length),objToSave.index=indexStyleSheet}else this.createInDom(idStyle,styleFont,objToSave)}else this.createInDom(idStyle,styleFont,objToSave);return objToSave.loaded=fontObj.loaded,this.fontsAdded.push(objToSave),this}},FFMethods={detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");if(0<msie)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(0<ua.indexOf("Trident/")){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");return 0<edge&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)},getUrl:function(fonts){if(void 0!==fonts){var urlClean,urlSplitted,fontUrlToLoad,arrUrls=fonts.match(/url\(.*?\)/g),objUrls={};if(arrUrls.forEach(function(url,index){urlClean=url.replace(/'/g,"").replace("url(","").replace(")",""),urlSplitted=urlClean.split("."),objUrls[urlSplitted[urlSplitted.length-1]]=urlClean}),this.detectIE()){var f,exForIE=["woff","otf","ttf"],nExForIE=exForIE.length;for(f=0;f<nExForIE;f++){var currentFont;if(void 0!==(currentFont=objUrls[exForIE[f]])){fontUrlToLoad=currentFont;break}f===nExForIE-1&&(fontUrlToLoad=null)}}else fontUrlToLoad=void 0!==objUrls.woff2?objUrls.woff2:void 0!==objUrls.woff?objUrls.woff:null;return fontUrlToLoad}},cache:function(objFont){if(null===objFont.src)this.exeMethods("catch",objFont,"invalid url");else{var urlSplitted=objFont.src.split("."),exFont=urlSplitted[urlSplitted.length-1],localFont=localStorage.getItem("FontFace"),fontEncoded=objFont.encoded;if(!fontEncoded){if(null===localFont)return!1;var fontsObj,fontInObj,fontByEx,fountInCache=!1;if(void 0!==(fontInObj=(fontsObj=JSON.parse(localFont))[objFont.family]))void 0!==(fontByEx=fontInObj[exFont])&&(fountInCache=fontByEx);return fountInCache}void 0!==(fontInObj=(fontsObj=null!==localFont?JSON.parse(localFont):{})[objFont.family])?void 0!==(fontByEx=fontInObj[exFont])?fontByEx!==fontEncoded&&(fontsObj[objFont.family][exFont]=fontEncoded):fontsObj[objFont.family][exFont]=fontEncoded:(fontsObj[objFont.family]={},fontsObj[objFont.family][exFont]=fontEncoded),localStorage.setItem("FontFace",JSON.stringify(fontsObj))}},exeMethods:function(type,objFont,errMsg){var objMsg=objFont,arrMethods=["then","thenLoaded","toAdd"];"catch"===type?(arrMethods=["catch","catchLoaded"],objMsg=errMsg):delete objFont.catch,arrMethods.forEach(function(method){objFont[method]&&("toAdd"===method?DFMethods.add(objMsg):objFont[method](objMsg),delete objFont[method])})},load:function(obj){var _this=this,fontSaved=this.cache(obj);if(fontSaved)obj.encoded=fontSaved,obj.status="loaded",this.exeMethods("then",obj);else if(obj.src){var xhr=new XMLHttpRequest;xhr.open("GET",obj.src),xhr.responseType="arraybuffer",xhr.addEventListener("readystatechange",function(e){switch(xhr.readyState){case 3:obj.status="loading";break;case 4:if(200===xhr.status){obj.status="loaded";var blob=new Blob([xhr.response],{type:"application/octet-binary"}),fileReader=new FileReader;fileReader.onload=function(evt){obj.encoded=evt.target.result,_this.cache(obj),_this.exeMethods("then",obj)},fileReader.readAsDataURL(blob)}else obj.status="error",_this.exeMethods("catch",obj,xhr.status)}}),xhr.send(null)}else this.exeMethods("catch",obj,"invalid url")}};Promise.prototype.then=function(resolve,reject){var _this=this._this;void 0!==resolve&&(_this[this._nameThen]=resolve),void 0!==reject&&(_this[this._nameCatch]=reject);var _self=this;return{catch:function(cbc){void 0!==cbc&&(_this[_self._nameCatch]=cbc)}}},Promise.prototype.catch=function(reject){var _this=this._this;void 0!==reject&&(_this[this._nameCatch]=reject);var _self=this;return{then:function(resolve){void 0!==resolve&&(_this[_self.nameThen]=resolve)}}},FontFace.prototype.load=function(){var _this=this;return setTimeout(function(){FFMethods.load(_this)},0),new Promise(_this,"then","catch")},FontFaceSet.prototype.add=function(fontObj){fontObj.encoded?DFMethods.add(fontObj):(fontObj.toAdd=!0,FFMethods.load(fontObj))},FontFaceSet.prototype.forEach=function(cb){DFMethods.fontsAdded.forEach(function(font){cb&&cb(font)})},FontFaceSet.prototype.delete=function(objFont){if(!objFont.family)return console.log("No se puede borrar una fuente sin determinar su nombre");if(!this.size)return console.log("No se han agregado tipografías");var rulesToCheck=["family","style","weight"];DFMethods.fontsAdded.filter(function(font){return 3===rulesToCheck.filter(function(ruleCss){return font[ruleCss]===objFont[ruleCss]}).length}).map(function(font){if(font.id){var elStyle=document.getElementById(font.id);elStyle.parentNode.removeChild(elStyle)}else{var styleSheetFont=document.styleSheets[font.index].cssRules;if(!styleSheetFont.length)return console.log("Sin reglas CSS");var listStyles,ruleStyle,propCss,ikS,nKeyStyles=Object.keys(styleSheetFont).length;for(ikS=0;ikS<nKeyStyles;ikS++)if(ruleStyle=styleSheetFont[ikS],listStyles=ruleStyle.style,void 0===ruleStyle.media&&void 0!==listStyles){console.log(listStyles);var rulesCssChecking=rulesToCheck.filter(function(oneRule){return void 0!==(propCss=listStyles["font"+oneRule.charAt().toUpperCase()+oneRule.slice(1)])&&(console.log("font"+oneRule.charAt().toUpperCase()+oneRule.slice(1)+" - "+propCss.replace(/"/g,"")+" - "+objFont[oneRule]),propCss.replace(/"/g,"")===objFont[oneRule])}).length;if(console.log(rulesCssChecking),3===rulesCssChecking){document.styleSheets[font.index].deleteRule(ikS);break}}}})},Object.defineProperty(FontFaceSet.prototype,"size",{get:function(){return DFMethods.fontsAdded.length}}),void 0===window.FontFace2&&(window.FontFace2=FontFace,Object.defineProperty(document,"fonts2",{get:function(){return new FontFaceSet}}))}(window,document);